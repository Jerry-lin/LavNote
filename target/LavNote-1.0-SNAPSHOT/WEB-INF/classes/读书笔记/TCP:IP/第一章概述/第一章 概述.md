# 计算机网络第一章

## 1.1互联网的组成

边缘部分：由所有连接在互联网上的主机构成。这部分是用户直接使用的，用来通讯和数据共享。计算机之间的通讯有两种，**一种是客户-服务器方式，一种是P2P方式。**

核心部分：**由大量网络和连接这些网络的路由器组成**。这部分是为边缘部分提供服务。**核心中起重要作用的是路由器，他的作用是分组交换，转发收到的分组。**

数据交换的几种方式和特点：

​	1.电路交换，需要进行建立连接、通话、释放连接三个过程。资源独占，线路传输的效率较低。

​	2.分组交换，需要将数据报文切分成较小的等长数据块，加入必要的控制信息，构成每一个分组，每一个分组独立传输。分组交换高效，灵活，迅速，可靠，但是也带来了时延和一些不必要的开销。

​	3.报文交换，整个报文传递到临近节点，全部存储下来后在查找转发表，然后转发到下一个节点。

## 1.2分层

​	网络协议通常分不同层次进行开发，每一层分别负责不同的通信功能

​	T C P / I P 通常被认为是一个**四层协议系统**，如下图所示

​	![](/Users/youyujie/Documents/读书笔记/TCP:IP/第一章概述/TCP:IP四层模型.png)

​		每一层负责不同的功能:

​			1.**数据链路层：有时候被称为网络接口层。**

​			2.**网络层：处理和分组相关，协议主要包含 I P 协 议 ( 网 际 协 议 )， I C M P 协议( I n t e r n e t 互联网控制 报 文 协 议 )，以及 I G M P 协议( I n t e r n e t 组 管 理 协 议 )**			

​			3.**运输层：为两台主机上的应用程序提供端到端的通信，主要的两个协议有TCP／UDPT C P 为两台主机提供高可靠性的数据通信，UDP为 应 用 层 提 供 一 种 非 常 简 单 的 服 务，传输不可靠**。

​			4.**应用层：负责处理特定的应用程序细节。主要的应用有：Telnet、FTP、SMTP、SNMP（简单网络管理协议）**

**网关的定义：一个链接两种不同协议簇的进程，为某一个特定的应用提供服务。**		

在TCP／IP协议簇中，**IP层使用不可靠的服务**，**TCP提供可靠的服务**，为了提供可靠到的服务，TCP采用了**超时重传，发送和接收端到端的确认分组机制**。

**网桥**是在**数据链路层**对网络进行互联的，**路由器**是在**网络层**对网络进行互联的。

## 1.3互联网地址

![](/Users/youyujie/Documents/读书笔记/TCP:IP/第一章概述/互联网五类地址.png)
![](/Users/youyujie/Documents/读书笔记/TCP:IP/第一章概述/互联网五类地址.png)

## 1.4数据的封装

​	当应用层使用TCP传输数据的时候，数据会被放入协议栈，每一层会被当作一串比特流送入网络，每一层会增加对应的首部。**TCP传递给IP的数据单元是TCP报文**，**IP传递给网络接口层的数据单元叫IP数据报，通过以太网传输的比特流称为帧。**		
![](/Users/youyujie/Documents/读书笔记/TCP:IP/第一章概述/数据进入协议栈的分装过程.png)	

UDP数据与TCP数据基本一致，**唯一的不同点是数据首部封装的是UDP首部，长度为8字节，UDP给IP层传输的是UDP数据报。**

## 1.5数据的分用

​	当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各
层协议加上的报文首部。**每层协议盒都要去检查报文首部中的协议标识，以确定接收数据的**
**上 层 协 议 。 这 个 过 程 称 作 分 用**

## 1.6端口号		

​	TCP和UDP采用16bit的端口号进行识别应用层序。有一些知名的端口号，FTP的TCP端口号21，每一个Telnet对应的TCP端口号是23，TFTP对应的UDP端口号是69，**知名的端口号一般介于1-255之间，256-1023之间主要是Unix服务进程所占用，临时端口主要分布在1024-5000，其他保留的端口号是大于5000的**。

​	**unix系统的端口号保存在／etc/services中**，使用一下命令可以查看端口号

​	grep “服务命令”  ／etc/services

​	